import React from "react";
import ProfileUser from "../../img/other-content/avatarProf.jpg";
import Popover from "@mui/material/Popover";
import { NavLink } from "react-router-dom";
import LogOut from "../../img/other-content/svg-profile/logout.svg";

import { Navigate } from "react-router-dom";
import { useDispatch } from "react-redux";
import { useAuth } from "./../../hooks/useAuth";
import { removeUser } from "./../../store/slices/userSlice";

const NavPorfilePop = () => {
  const [anchorEl, setAnchorEl] = React.useState(null);

  const handleClick = (event) => {
    setAnchorEl(event.currentTarget);
  };

  const handleClose = () => {
    setAnchorEl(null);
  };

  const open = Boolean(anchorEl);
  const id = open ? "simple-popover" : undefined;

  const dispatch = useDispatch();
  const { isAuth, email } = useAuth();
  return (
    <React.Fragment>
      <li
        aria-describedby={id}
        type="button"
        onClick={handleClick}
        className="max-w-[190px] hover:bg-darkBlue py-[5px] px-[5px] rounded-[8px] transition-colors cursor-pointer flex items-center"
      >
        <svg
          width="25px"
          height="25px"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.70711 9.71069C5.31658 10.1012 5.31658 10.7344 5.70711 11.1249L10.5993 16.0123C11.3805 16.7927 12.6463 16.7924 13.4271 16.0117L18.3174 11.1213C18.708 10.7308 18.708 10.0976 18.3174 9.70708C17.9269 9.31655 17.2937 9.31655 16.9032 9.70708L12.7176 13.8927C12.3271 14.2833 11.6939 14.2832 11.3034 13.8927L7.12132 9.71069C6.7308 9.32016 6.09763 9.32016 5.70711 9.71069Z"
            fill="white"
          />
        </svg>
        <p className="text-white ml-[5px] mr-[10px] break-words line-clamp-1 text-center font-GothamPro text-[16px]">
          {email}
        </p>
        <img
          className="max-w-[40px] h-auto rounded-[7px]"
          src={ProfileUser}
          alt=""
        />
      </li>

      <Popover
        PaperProps={{
          sx: {
            border: "2px solid", // добавляет границу
            borderColor: "#5662d5", // устанавливает цвет границы
            borderRadius: 2, // или любое другое значение, которое вам нужно
          },
        }}
        id={id}
        open={open}
        anchorEl={anchorEl}
        onClose={handleClose}
        anchorOrigin={{
          vertical: "bottom",
          horizontal: "center",
        }}
        transformOrigin={{
          vertical: "top",
          horizontal: "center",
        }}
      >
        <main className="bg-[#1e2142] py-[10px] text-center px-[10px] w-[190px] h-full">
          <NavLink to="/profile/">
            <section className="cursor-pointer gap-[8px] items-center flex justify-start hover:bg-darkBlue transition-colors py-[9px] px-[9px] rounded-[7px]">
              <svg
                className="w-[20px] h-[20px]"
                viewBox="0 0 32 32"
                fill="white"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="_40-User" data-name="40-User">
                  <path d="m16 2a7 7 0 1 0 7 7 7 7 0 0 0 -7-7zm0 12a5 5 0 1 1 5-5 5 5 0 0 1 -5 5z" />
                  <path d="m21.17 18h-10.34a8.84 8.84 0 0 0 -8.83 8.83 3.17 3.17 0 0 0 3.17 3.17h21.66a3.17 3.17 0 0 0 3.17-3.17 8.84 8.84 0 0 0 -8.83-8.83zm5.66 10h-21.66a1.17 1.17 0 0 1 -1.17-1.17 6.83 6.83 0 0 1 6.83-6.83h10.34a6.83 6.83 0 0 1 6.83 6.83 1.17 1.17 0 0 1 -1.17 1.17z" />
                </g>
              </svg>
              <h1 className="text-white font-GothamPro font-light text-[20px] ">
                Профиль
              </h1>
            </section>
          </NavLink>
          <NavLink to="https://t.me/minxrka" target="_blank">
            <section className="cursor-pointer gap-[8px] items-center flex justify-start hover:bg-darkBlue transition-colors py-[9px] px-[9px] rounded-[7px]">
              <svg
                className="w-[20px] h-[20px]"
                fill="white"
                version="1.1"
                id="Capa_1"
                x="0px"
                y="0px"
                viewBox="0 0 512 512"
              >
                <g>
                  <g>
                    <path d="M207.37,305.799c-3.911-3.902-10.244-3.891-14.142,0.022l-0.313,0.313c-3.899,3.911-3.89,10.242,0.022,14.142 c1.951,1.946,4.505,2.918,7.06,2.918c2.564,0,5.129-0.98,7.082-2.94l0.313-0.313C211.291,316.03,211.282,309.699,207.37,305.799z" />
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M300.75,286.11c-1.87-1.869-4.44-2.93-7.07-2.93s-5.21,1.061-7.08,2.93c-1.859,1.86-2.92,4.431-2.92,7.07 c0,2.63,1.061,5.21,2.92,7.07c1.87,1.859,4.45,2.93,7.08,2.93s5.2-1.07,7.07-2.93c1.859-1.86,2.93-4.44,2.93-7.07 C303.68,290.54,302.61,287.97,300.75,286.11z" />
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M271.67,257.031c-1.86-1.86-4.44-2.931-7.07-2.931s-5.21,1.07-7.07,2.931c-1.859,1.859-2.93,4.439-2.93,7.069 s1.07,5.21,2.93,7.07s4.44,2.93,7.07,2.93s5.21-1.069,7.07-2.93c1.859-1.86,2.93-4.44,2.93-7.07S273.53,258.89,271.67,257.031z" />
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M244.859,230.22c-1.859-1.86-4.439-2.93-7.069-2.93s-5.21,1.069-7.07,2.93c-1.86,1.861-2.93,4.44-2.93,7.07 s1.069,5.21,2.93,7.069c1.86,1.861,4.44,2.931,7.07,2.931c2.63,0,5.21-1.07,7.069-2.931c1.86-1.859,2.931-4.439,2.931-7.069 S246.72,232.08,244.859,230.22z" />
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M381.783,178.546c3.402,0,6.571-1.729,8.411-4.592l31.21-48.539c2.545-3.957,1.986-9.152-1.34-12.479L396.309,89.18 c-3.327-3.326-8.521-3.883-12.479-1.34l-48.539,31.211c-2.862,1.84-4.592,5.009-4.592,8.411v38.783l-50.778,50.779l-37.76-37.76 v-28.428c0-37.704-30.675-68.379-68.379-68.379h-37.643c-4.047,0-7.695,2.439-9.241,6.179c-1.546,3.74-0.687,8.044,2.18,10.901 l26.981,26.913c3.832,3.822,5.943,8.907,5.947,14.319c0.004,5.411-2.103,10.5-5.929,14.326c-7.893,7.893-20.734,7.893-28.627,0 l-26.914-26.914c-2.86-2.86-7.161-3.713-10.898-2.168c-3.736,1.548-6.173,5.194-6.173,9.239v37.689 c0,37.705,30.675,68.38,68.38,68.38h27.293l12.727,12.727l-88.017,88.017c-13.32,13.32-13.32,34.995,0,48.317l15.05,15.05 c6.661,6.66,15.41,9.991,24.159,9.991c8.749,0,17.498-3.331,24.159-9.991l88.017-88.017l90.052,90.052 c6.661,6.66,15.41,9.991,24.159,9.991c8.749,0,17.498-3.331,24.159-9.991l14.223-14.224c13.32-13.321,13.32-34.996,0-48.316 l-113.763-113.76l52.62-52.621H381.783z M350.698,132.921l37.168-23.899l12.356,12.356l-23.898,37.168h-25.626V132.921z M153.073,391.292c-5.012,5.012-12.868,5.46-18.408,1.375l45.118-45.118c3.905-3.905,3.905-10.237,0-14.143 c-3.906-3.904-10.236-3.904-14.143,0l-45.243,45.243l-2.407-2.407c-5.522-5.523-5.523-14.511,0-20.033l88.017-88.017 l35.083,35.083L153.073,391.292z M393.684,359.072c5.51,5.512,5.519,14.473,0.029,19.999l-69.385-69.384 c-3.906-3.904-10.236-3.904-14.143,0c-3.905,3.905-3.905,10.237,0,14.143l69.387,69.386l-0.112,0.112 c-5.523,5.523-14.51,5.523-20.033,0L191.959,225.86c-1.822-2.796-4.957-4.537-8.376-4.537h-31.738 c-26.677,0-48.38-21.703-48.38-48.38v-13.547l9.843,9.843c7.601,7.601,17.707,11.786,28.456,11.786 c10.749,0,20.854-4.186,28.456-11.787c7.607-7.607,11.793-17.723,11.786-28.48c-0.007-10.759-4.205-20.868-11.823-28.467 l-9.857-9.833h13.456c26.676,0,48.379,21.703,48.379,48.379v32.57c0,2.652,1.054,5.195,2.929,7.071L393.684,359.072z" />
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M467.712,112.033c-3.111-4.565-9.332-5.744-13.895-2.635c-4.564,3.11-5.744,9.331-2.635,13.895 C477.886,162.487,492,208.377,492,256c0,130.131-105.869,236-236,236S20,386.131,20,256S125.869,20,256,20 c48.662,0,95.381,14.688,135.106,42.474c4.526,3.166,10.759,2.063,13.926-2.463c3.166-4.525,2.063-10.761-2.463-13.926 C359.467,15.936,308.784,0,256,0C187.62,0,123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256s26.629,132.667,74.98,181.02 C123.333,485.371,187.62,512,256,512s132.667-26.629,181.02-74.98C485.371,388.667,512,324.38,512,256 C512,204.344,496.686,154.561,467.712,112.033z" />
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M437.392,75.354l-0.372-0.373c-3.906-3.904-10.236-3.904-14.143,0c-3.905,3.905-3.905,10.237,0,14.143l0.311,0.312 c1.956,1.972,4.528,2.959,7.102,2.959c2.545,0,5.091-0.966,7.041-2.898C441.253,85.608,441.28,79.276,437.392,75.354z" />
                  </g>
                </g>
              </svg>

              <h1 className="text-white font-GothamPro font-light text-[20px] ">
                Поддержка
              </h1>
            </section>
          </NavLink>
          <section className="cursor-pointer gap-[8px] items-center flex justify-start hover:bg-darkBlue transition-colors py-[9px] px-[9px] rounded-[7px]">
            <svg
              className="w-[20px] h-[20px]"
              xmlns="http://www.w3.org/2000/svg"
              id="Layer_6"
              fill="white"
              data-name="Layer 6"
              viewBox="0 0 32 32"
            >
              <path d="M16,22.4A6.4,6.4,0,1,1,22.4,16,6.41,6.41,0,0,1,16,22.4Zm0-10.67A4.27,4.27,0,1,0,20.27,16,4.27,4.27,0,0,0,16,11.73Z" />
              <path d="M17.35,32h-2.7a3.22,3.22,0,0,1-3.17-2.75l-.25-1.74L9.82,28.57a3.22,3.22,0,0,1-4.18-.3L3.73,26.36a3.22,3.22,0,0,1-.3-4.18l1.06-1.41-1.74-.25A3.21,3.21,0,0,1,0,17.35v-2.7a3.21,3.21,0,0,1,2.75-3.17l1.74-.25L3.43,9.82a3.22,3.22,0,0,1,.3-4.18L5.64,3.73a3.22,3.22,0,0,1,4.18-.3l2.85,2.14a1.07,1.07,0,1,1-1.28,1.71L8.54,5.14a1.07,1.07,0,0,0-1.39.1L5.24,7.15a1.07,1.07,0,0,0-.1,1.39l2.14,2.85a1.07,1.07,0,0,1-.7,1.7L3,13.59a1.07,1.07,0,0,0-.92,1.06v2.7A1.07,1.07,0,0,0,3,18.41l3.53.5a1.07,1.07,0,0,1,.7,1.7L5.14,23.46a1.07,1.07,0,0,0,.1,1.39l1.91,1.91a1.07,1.07,0,0,0,1.39.1l2.85-2.14a1.07,1.07,0,0,1,1.7.7l.5,3.53a1.07,1.07,0,0,0,1.06.92h2.7A1.07,1.07,0,0,0,18.41,29a1.07,1.07,0,0,1,2.11.3A3.22,3.22,0,0,1,17.35,32Z" />
              <path d="M24.09,29.2a3.19,3.19,0,0,1-1.92-.64l-2.85-2.14a1.07,1.07,0,1,1,1.28-1.71l2.85,2.14a1.07,1.07,0,0,0,1.39-.1l1.91-1.91a1.07,1.07,0,0,0,.1-1.39l-2.14-2.85a1.07,1.07,0,0,1,.7-1.7l3.53-.5a1.07,1.07,0,0,0,.92-1.06v-2.7A1.07,1.07,0,0,0,29,13.59l-3.53-.5a1.07,1.07,0,0,1-.7-1.7l2.14-2.85a1.07,1.07,0,0,0-.1-1.39L24.85,5.24a1.07,1.07,0,0,0-1.39-.1L20.61,7.28a1.07,1.07,0,0,1-1.7-.7L18.41,3a1.07,1.07,0,0,0-1.06-.92h-2.7A1.07,1.07,0,0,0,13.59,3a1.07,1.07,0,0,1-2.11-.3A3.22,3.22,0,0,1,14.65,0h2.7a3.22,3.22,0,0,1,3.17,2.75l.25,1.74,1.41-1.06a3.22,3.22,0,0,1,4.18.3l1.91,1.91a3.22,3.22,0,0,1,.3,4.18l-1.06,1.41,1.74.25A3.21,3.21,0,0,1,32,14.65v2.7a3.21,3.21,0,0,1-2.75,3.17l-1.74.25,1.06,1.41a3.22,3.22,0,0,1-.3,4.18l-1.91,1.91A3.2,3.2,0,0,1,24.09,29.2Z" />
            </svg>
            <h1 className="text-white font-GothamPro font-light text-[20px] ">
              Настройки
            </h1>
          </section>
          <div className="mt-[5px] mb-[5px] w-full h-[1px] bg-Blue600"></div>
          <section
            onClick={() => dispatch(removeUser())}
            className="cursor-pointer gap-[8px] items-center flex justify-start hover:bg-mainRedJapan transition-colors py-[9px] px-[9px] rounded-[7px]"
          >
            <img className="w-[20px] h-[20px] fill-white" src={LogOut} alt="" />
            <NavLink to="/">
              <h1 className="text-white font-GothamPro font-light text-[20px] ">
                Выйти
              </h1>
            </NavLink>
          </section>
        </main>
      </Popover>
    </React.Fragment>
  );
};

export default NavPorfilePop;
